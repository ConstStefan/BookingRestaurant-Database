<?xml version = '1.0' encoding = 'UTF-8'?>
<TriggerOraclev10g class="oracle.dbtools.crest.model.design.storage.oracle.v10g.TriggerOraclev10g" name="trg_check_seating_capacity" directorySegmentName="seg_0" id="0575F831-D6C5-71EE-07F0-1E5A61B842E9">
<createdBy>stefa</createdBy>
<createdTime>2024-05-26 18:49:49 UTC</createdTime>
<ownerDesignName>proiectpbd</ownerDesignName>
<actions>INSERT, UPDATE</actions>
<body><![CDATA[DECLARE
  v_seating_capacity INTEGER;
  v_total_guests INTEGER;
BEGIN
  SELECT seating_capacity INTO v_seating_capacity
  FROM tabless
  WHERE table_id = :NEW.table_id;

  -- Calculam numarul total de oaspeti (number_of_guests + 1 pentru client)
  v_total_guests := :NEW.number_of_guests + 1;

  -- Verificam daca numarul total de oaspeti depaseste capacitatea mesei
  IF v_total_guests > v_seating_capacity THEN
    RAISE_APPLICATION_ERROR(-20001, 'The number of guests plus the customer exceeds the seating capacity of the table.');
  END IF;
END;]]></body>
<triggerTime>BEFORE</triggerTime>
<table>E892F229-B86A-6E58-9985-C3A58CA68650</table>
</TriggerOraclev10g>